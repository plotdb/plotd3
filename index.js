var svg,box,m,p,cscale,legend,legendGroup,lbox,xscale,xAxisGroup,xAxis,yscale,yAxisGroup,yAxis,resize;svg=d3.select("body").append("svg"),box=document.body.getBoundingClientRect(),m=10,p=20,svg.attr({width:box.width,height:box.height,viewBox:"0 0 "+box.width+" "+box.height,preserveAspectRatio:"xMidYMid"}),cscale=d3.scale.ordinal().domain(["這個字非常的長","這個字也是相當長","HastalavistaBaby","中文是不是也可以呢你猜猜看"]).range(["#f00","#0f0","#00f"]),legend=plotd3.rwd.legend().scale(cscale).padding([30,10]).size([box.width,50]),legendGroup=svg.append("g").attr({"class":"legend-group"}),legendGroup.call(legend),lbox=legend.offset(),legendGroup.attr({transform:"translate("+(box.width-lbox[0])/2+" "+(box.height-lbox[1]-m)+")"}),xscale=d3.scale.linear().range([m,box.width-m]).domain([1e5,1e6]),xAxisGroup=svg.append("g").attr({"class":"axis horizontal"}),xAxis=plotd3.rwd.axis().orient("bottom").scale(xscale),xAxisGroup.call(xAxis),xAxisGroup.attr({transform:"translate(0 "+(box.height-xAxis.offset()-m-lbox[1]-p)+")"}),yscale=d3.scale.linear().range([box.height-xAxis.offset()-m-lbox[1]-p,m]).domain([1e5,1e6]),yAxisGroup=svg.append("g").attr({"class":"axis vertical"}),yAxis=plotd3.rwd.axis().orient("left").scale(yscale),yAxisGroup.call(yAxis),yAxisGroup.attr({transform:"translate("+(yAxis.offset()+m)+" 0)"}),xscale.range([yAxis.offset()+m,box.width-m]),xAxisGroup.call(xAxis),resize=function(){var e,t;return e=document.body.getBoundingClientRect(),svg.attr({width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height,preserveAspectRatio:"xMidYMid"}),legend.size([e.width,50]),legendGroup.call(legend),t=legend.offset(),legendGroup.attr({transform:"translate("+(e.width-t[0])/2+" "+(e.height-t[1]-m)+")"}),xscale.range([yAxis.offset()+m,e.width-m]),yscale.range([e.height-xAxis.offset()-m-p-t[1],m]),xAxisGroup.call(xAxis),yAxisGroup.call(yAxis),xAxisGroup.attr({transform:"translate(0 "+(e.height-xAxis.offset()-m-p-t[1])+")"}),yAxisGroup.attr({transform:"translate("+(yAxis.offset()+m)+" 0)"})},window.addEventListener("resize",resize);