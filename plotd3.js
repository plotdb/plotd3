var plotd3;plotd3={html:{},rwd:{}},plotd3.html.popup=function(t,e,n){var i,r;return i=t.querySelector(".pdb-popup"),i?i=d3.select(i):(i=d3.select(t).append("div").attr({"class":"pdb-popup float"}),i.each(function(){var t;return t=d3.select(this),t.append("div").attr({"class":"title"}),t.append("div").attr({"class":"value"}),t})),r=e,r.on("mousemove",function(e,r){var a,l,c,s,o;return a=[d3.event.clientX,d3.event.clientY],l=a[0],c=a[1],n.call(this,e,r,i),i.style({display:"block"}),s=i[0][0].getBoundingClientRect(),o=t.getBoundingClientRect(),l-=s.width/2,c+=20,c>o.top+o.height-s.height-50&&(c=c-s.height-40),10>l&&(l=10),l>o.left+o.width-s.width-10&&(l=o.left+o.width-s.width-10),i.style({top:c+"px",left:l+"px"})}),r.on("mouseout",function(){return e.hidePopup&&clearTimeout(e.hidePopup),e.hidePopup=setTimeout(function(){return i.style({display:"none"})},1e3)}),r},plotd3.rwd.legend=function(){var t,e;return t={padding:10},e=function(){var e,n,i;return t.group=this,e=t.scale.domain(),n=this.selectAll("g.legend").data(e),n.enter().append("g").attr({"class":"legend"}).each(function(){var t;return t=d3.select(this),t.append("path").attr({"class":"mark"}),t.append("text")}),n.exit().remove(),this.selectAll("g.legend").each(function(e){var n,i;return n=d3.select(this),n.select("text").text(e),i=.8*n.select("text")[0][0].getBBox().height,n.select("path.mark").attr({d:"M"+i/2+" 0 A"+i/2+" "+i/2+" 0 0 0 "+i/2+" "+i+("A"+i/2+" "+i/2+" 0 0 0 "+i/2+" 0"),fill:t.scale(e)}),n.select("text").attr({"dominant-baseline":"hanging","text-anchor":"start",dy:1,dx:i+3})}),i=[0,0],this.selectAll("g.legend").each(function(){var e,n,r,a;return e=d3.select(this).attr({transform:"translate("+i[0]+" "+i[1]+")"}),n=[this.getBBox().width,this.getBBox().height],r=n[0],a=n[1],t.size&&t.size[0]<i[0]+r&&(i[0]=0,i[1]+=a+t.padding[1],e=d3.select(this).attr({transform:"translate("+i[0]+" "+i[1]+")"})),i[0]+=r+t.padding[0]})},e.offset=function(){var e;return t.group?(e=t.group[0][0].getBBox(),[e.width,e.height]):[0,0]},["scale","size","padding"].map(function(n){return e[n]=function(n){return function(i){return i?(t[n]=i,e):t[n]}}(n)}),e},plotd3.rwd.axis=function(){function t(t){return function(){var i;return i=e[t].apply(e,arguments),i===e?n:i}}var e,n,i,r;e=d3.svg.axis(),n=function(){return n.autotick(this,arguments)};for(i in e)r=e[i],"function"==typeof r&&(n[i]=t(i));return n.offset=function(){return this._offset},n.autotick=function(t,n){var i,r,a,l,c,s,o,u,d,h,p,f,g,m;null==n&&(n=[]),e.apply(t,n),i=[e.scale(),e.orient()],r=i[0],a=i[1],l=r.range(),c=l[1]-l[0],i=[e.innerTickSize(),e.outerTickSize(),e.tickPadding()],s=i[0],o=i[1],u=i[2],d=d3.max([s,o])+u+1,h=e.tickFormat(),"left"===a||"right"===a?(p=d3.max(t.selectAll("text")[0].map(function(t){return t.getBBox().height})),f=c/(2*p||16),g=r.ticks?e.tickValues()||r.ticks(e.ticks()):r.domain(),f=Math.ceil(g.length/f),g=g.filter(function(t,e){return!(e%f)}),e.tickValues(g),t.call(e),this._offset=d3.max(t.selectAll("text")[0].map(function(t){return t.getBBox().width})),this._offset+=d):(g=r.ticks?e.tickValues()||r.ticks(e.ticks()):r.domain(),t.call(e),m=2*d3.max(t.selectAll("text")[0].map(function(t){return t.getBBox().width})),p=d3.max(t.selectAll("text")[0].map(function(t){return t.getBBox().height})),f=Math.ceil(g.length/(c/m)),g=g.filter(function(t,e){return!(e%f)}),e.tickValues(g),this._offset=p+d),t&&t.call(e)},n};