var plotd3;plotd3={html:{},rwd:{}},plotd3.html.tooltip=function(t){var e,n,i;return e={handler:{}},n=plotd3.html.popup(t,null,null,e),i=e.popup,n.nodes=function(o){var r;return r=o,r.on("mouseover",function(t,e){return n.fire("mouseover",t,e,this)}),r.on("mousemove",function(o,r){var l,a,s,u,c,d,f,p,h;return l=t.getBoundingClientRect(),a=this.getBoundingClientRect(),e.coord&&(s=e.coord.call(this,o,r),u=s[0],c=s[1],d=s[2],f=s[3],a={left:u,top:c,width:d,height:f}),n.fire("mousemove",o,r,this),p=a.left>l.width/2+l.left?!0:!1,i.attr({"class":"pdb-popup tooltip "+(p?"left":"right")}),h=function(){var t;return t=i[0][0].getBoundingClientRect(),i.style({top:a.top+a.height/2-t.height/2-l.top+"px",opacity:1}),i.style(p?{left:a.left-t.width-10-l.left+"px"}:{left:a.left+a.width+10-l.left+"px"})},"block"!==i.style("display")?(i.style({display:"block",opacity:.01}),setTimeout(h,0)):h()}),r.on("mouseout",function(t,e){return n.fire("mouseout",t,e,this),i.style({display:"none"})}),n},n.direction=function(t){return e.direction="left"===t?"left":"right",i.attr({"class":"pdb-popup tooltip "+e.direction})},n.show=function(t,o){var r;return r=i[0][0].getBoundingClientRect(),"right"!==e.direction?t=t-(r.right-r.left)-10:t+=10,i.style({display:"block"}),i.style({top:o-(r.bottom-r.top)/2+"px",left:t+"px"}),n.hide()},n.type("tooltip"),n},plotd3.html["float"]=function(t,e,n){var i;return i=plotd3.html.popup(t,e,n),i.type("float"),i},plotd3.html.popup=function(t,e,n,i){var o,r;return null==i&&(i={handler:{}}),o=i.popup=d3.select(t).append("div"),o.each(function(){var t;return t=d3.select(this),t.append("div").attr({"class":"title"}),t.append("div").attr({"class":"value"}),t}),o.on("mouseover",function(){return d3.select(this).style({display:"none"})}),r=function(){},r.hide=function(t,e){return null!=t&&null!=e&&r.fire("mouseout",t,e,this),r.hidePopup&&clearTimeout(r.hidePopup),r.hidePopup=setTimeout(function(){return o.style({display:"none"})},1e3)},r.getPopupNode=function(){return o},r.nodes=function(e){var n;return n=e,n.on("mouseover",function(t,e){return r.fire("mouseove",t,e,this)}),n.on("mouseout",r.hide),n.on("mousemove",function(e,n){var l,a,s,u,c,d,f;return l=[d3.event.clientX,d3.event.clientY],a=l[0],s=l[1],i.coord&&(l=i.coord.call(this,e,n),a=l[0],s=l[1],u=l[2],c=l[3]),r.fire("mousemove",e,n,this),o.style({display:"block"}),d=o[0][0].getBoundingClientRect(),f=t.getBoundingClientRect(),a=a-d.width/2-f.left,s=s+20-f.top,s>f.height-d.height-50&&(s=s-d.height-40),10>a&&(a=10),a>+f.width-d.width-10&&(a=f.width-d.width-10),o.style({top:s+"px",left:a+"px"})}),r},r.coord=function(t){return null==t?i.coord:(i.coord=t,r)},r.call=function(t){return t.call(o[0][0])},r.show=function(t,e){return o.style({display:"block"}),o.style({top:e+"px",left:t+"px"}),r.hide()},r.fire=function(t,e,n,r){var l;return((l=i.handler)[t]||(l[t]=[])).forEach(function(t){return t.call(r,e,n,o)})},r.fontSize=function(t){return null!=t?(i.fontSize=t,o.style({"font-size":t+"px"}),r):i.fontSize},r.on=function(t,e){var n;return((n=i.handler)[t]||(n[t]=[])).push(e),r},r.type=function(t){var e;return t?(i.type=t,o.attr({"class":("pdb-popup "+((e=i.type)?e:"")).trim()})):i.type},e&&r.nodes(e),n&&r.on("mousemove",n),r.type("float"),r},plotd3.rwd.legend=function(){var t,e;return t={padding:[10,5]},e=function(){var e,n,i,o,r,l,a;return t.group=this,n=(e=t.tickValues)?e:t.scale?t.scale.invert?t.scale.ticks(t.ticks||5):t.scale.domain():[0,1],i=this.selectAll("g.legend").data(n),i.enter().append("g").attr({"class":"legend"}).each(function(){var t;return t=d3.select(this),t.append("path").attr({"class":"marker"}),t.append("text")}),i.exit().remove(),this.selectAll("g.legend").each(function(e,i){var o,r,l,a,s,u;if("radius"!==t.type||e)return o=d3.select(this),r=o.select("text"),r.text(e),null!=t.fontSize&&r.attr("font-size",t.fontSize),l=.8*o.select("text")[0][0].getBBox().height,t.marker?t.marker.call(o.select("path.marker")[0][0],e,i):(a=o.select("path.marker"),"color"===(t.type||"color")?a.attr({d:"M"+l/2+" 0 A"+l/2+" "+l/2+" 0 0 0 "+l/2+" "+l+("A"+l/2+" "+l/2+" 0 0 0 "+l/2+" 0"),fill:t.scale(e)}):"radius"===t.type&&(s=t.scale(e),a.attr({cx:s,cy:s,r:s,d:"M"+l/2+" "+(l/2-s)+" A"+s+" "+s+" 0 0 0 "+l/2+" "+(l/2+s)+("A"+s+" "+s+" 0 0 0 "+l/2+" "+(l/2-s)),fill:"#999"}))),u=0,"radius"===t.type&&(u=t.scale(n[n.length-1])),o.select("text").attr({"dominant-baseline":"hanging","text-anchor":"start",dy:1,dx:l+3+u,"font-size":null!=t.fontSize?t.fontSize:void 0})}),o=[0,0],r=[0,0],this.select("text.label").remove(),t.label&&(l=this.append("text").attr({"class":"label"}).text(t.label),l.attr({"font-size":null!=t.fontSize?1.1*t.fontSize:void 0,"font-weight":"bold","dominant-baseline":"hanging"}),"bottom"===(a=t.orient)||"top"===a?o[0]+=l[0][0].getBBox().width+t.padding[0]||10:o[1]+=l[0][0].getBBox().height+t.padding[1]||5),this.selectAll("g.legend").each(function(){var e,n,i,l;return e=d3.select(this).attr({transform:"translate("+o[0]+" "+o[1]+")"}),n=[this.getBBox().width,this.getBBox().height],i=n[0],l=n[1],"bottom"===(n=t.orient)||"top"===n?(t.size&&t.size[0]<o[0]+i&&(o[0]=0,o[1]+=l+(t.padding[1]||5),e=d3.select(this).attr({transform:"translate("+o[0]+" "+o[1]+")"})),o[0]+=i+(t.padding[0]||10)):(r[0]<i&&(r[0]=i),t.size&&t.size[1]<o[1]+l&&(o[1]=0,o[0]+=r[0]+(t.padding[0]||10),e=d3.select(this).attr({transform:"translate("+o[0]+" "+o[1]+")"})),o[1]+=l+(t.padding[1]||5),o[1]+="radius"===t.type?3:0)})},e.offset=function(){var e;return t.group?(e=t.group[0][0].getBBox(),[e.width,e.height]):[0,0]},["label","fontSize","type","marker","tickValues","ticks","orient","scale","size","padding"].map(function(n){return e[n]=function(n){return function(i){return i?(t[n]=i,e):t[n]}}(n)}),e},plotd3.rwd.axis=function(){function t(t){return function(){var e;return e=n[t].apply(n,arguments),e===n?i:e}}var e,n,i,o,r,l;e={},n=d3.svg.axis(),i=function(){return i.autotick(this,arguments)};for(o in n)r=n[o],"function"==typeof r&&(i[o]=t(o));return i.offset=function(){return this._offset},l=function(t,i,o,r){var l,a;return l=(i[0]+i[1])/2,t.select("text.label").remove(),t.call(n),t.selectAll("text").attr({"font-size":null!=e.fontSize?e.fontSize:void 0}),"bottom"===r&&setTimeout(function(){return t.selectAll(".tick text").attr({dy:"0.71em"})},0),e.label?(a=t.append("text").attr({"class":"label"}).text(e.label),null!=e.fontSize&&a.attr({"font-size":e.fontSize}),a.attr("bottom"===r||"top"===r?"in"===e.labelPosition?{transform:"translate("+i[1]+" -3)","text-anchor":"end"}:{transform:"translate("+l+" "+(o+5)+")","text-anchor":"middle"}:"in"===e.labelPosition?{transform:"translate(0 "+i[0]+") rotate(-90)",dy:"1em","text-anchor":"end"}:{transform:"translate("+(-o-5)+" "+l+") rotate(-90)","text-anchor":"middle"})):void 0},i.autotick=function(t,i){var o,r,a,s,u,c,d,f,p,h,g,m,x,y,v,k;if(null==i&&(i=[]),n.apply(t,i),o=[n.scale(),n.orient()],r=o[0],a=o[1],r.rangeExtent?s=r.rangeExtent():(s=r.range(),s=[s[0],s[1]],s.sort(function(t,e){return t-e})),u=Math.abs(s[1]-s[0]),o=[n.innerTickSize(),n.outerTickSize(),n.tickPadding()],c=o[0],d=o[1],f=o[2],p=d3.max([c,d])+f+1,h=n.tickFormat(),g=r.ticks?n.tickValues()||r.ticks(n.ticks()):r.domain(),"left"===a||"right"===a?(m=d3.max(t.selectAll(".tick text")[0].map(function(t){return t.getBBox().height})),x=u/(1.4*m||14),x=Math.ceil(g.length/x),g=g.filter(function(t,e){return!(e%x)}),n.tickValues(g),l(t,s,p,a),this._offset=d3.max(t.selectAll(".tick text")[0].map(function(t){return t.getBBox().width})),this._offset+=p):(l(t,s,p,a),y=1.15*d3.max(t.selectAll(".tick text")[0].map(function(t){return t.getBBox().width})),m=d3.max(t.selectAll(".tick text")[0].map(function(t){return t.getBBox().height})),x=Math.ceil(g.length/(u/y)),g=g.filter(function(t,e){return!(e%x)}),n.tickValues(g),this._offset=m+p),l(t,s,this._offset,a),e.label&&"in"!==e.labelPosition&&(this._offset+=t.select("text.label")[0][0].getBBox().height+5),e.boundaryTickInside){if(v=t[0][0].getBBox(),k=t.select("path")[0][0].getBBox(),"left"===a||"right"===a)return t.select("g.tick:first-of-type text").attr({dy:-e.fontSize/2}),t.select("g.tick:last-of-type text").attr({dy:e.fontSize});if("bottom"===a||"top"===a)return t.select("g.tick:first-of-type text").style({"text-anchor":"start"}),t.select("g.tick:last-of-type text").style({"text-anchor":"end"})}},["fontSize","label","labelPosition","multiLine","boundaryTickInside"].map(function(t){return i[t]=function(t){return function(n){return null==n?e[t]:(e[t]=n,i)}}(t)}),i};